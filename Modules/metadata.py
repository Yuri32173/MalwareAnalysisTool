#!/usr/bin/python3

import os
import sys
import exiftool
from rich import print

# Legends
info_symbol = f"[bold cyan][[bold red]*[bold cyan]][white]"

def get_exif_metadata(file_path):
    print(f"{info_symbol} Extracting metadata from target file...\n")

    # Extracting metadata with exiftool
    with exiftool.ExifTool() as et:
        metadata = et.get_metadata(file_path)

    # Parsing metadata
    print(f"{info_symbol} Exif/Metadata information")
    for md in metadata:
        try:
            if "ExifTool" in md or "Error" in md:
                continue
            else:
                print(f"[magenta]>>>[white] {md.split(':')[1]}: [green][i]{metadata[md]}[/i]")
        except:
            continue

# Execution zone
if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: python script.py <file_path>")
        sys.exit(1)
    
    target_file = sys.argv[1]
    if os.path.isfile(target_file):
        get_exif_metadata(target_file)
    else:
        print("[blink bold white on red]Target file not found!")
